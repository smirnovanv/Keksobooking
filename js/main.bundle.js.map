{"version":3,"sources":["webpack://keksobooking/./source/js/generate-offers-markup.js","webpack://keksobooking/./source/js/map.js","webpack://keksobooking/./source/js/util.js","webpack://keksobooking/./source/js/modal-windows.js","webpack://keksobooking/./source/js/photo.js","webpack://keksobooking/./source/js/form.js","webpack://keksobooking/./source/js/filter.js","webpack://keksobooking/./source/js/similar-list.js","webpack://keksobooking/./source/js/main.js","webpack://keksobooking/./source/js/server.js"],"names":["offerCard","document","querySelector","content","DEFAULT_LAT","DEFAULT_LNG","loadStatus","map","L","on","setView","lat","lng","tileLayer","attribution","addTo","getMapLoadStatus","mainPinIcon","icon","iconUrl","iconSize","iconAnchor","mainPinMarker","marker","draggable","markers","layerGroup","isEscEvent","evt","key","showAlert","message","alertContainer","createElement","style","zIndex","position","left","top","right","padding","fontSize","textAlign","backgroundColor","textContent","body","append","setTimeout","remove","main","successfulAdMarkup","mapCanvas","errorAdMarkup","successfulAdWindow","cloneNode","errorAdWindow","onSuccessfulAdWindowClick","closeSuccessWindow","onSuccessfulAdWindowEscKeydown","preventDefault","removeChild","removeEventListener","onErrorAdWindowClick","closeErrorAdWindow","onErrorAdWindowEscKeydown","showAdErrorWindow","insertBefore","childNodes","addEventListener","FILE_TYPES","loadAvatarField","avatarPreview","loadImagesField","photosContainer","file","files","fileName","name","toLowerCase","some","it","endsWith","reader","FileReader","src","result","readAsDataURL","apartmentImagePreview","setAttribute","appendChild","FLAT_MINIMUM_PRICE","HOUSE_MINIMUM_PRICE","PALACE_MINIMUM_PRICE","yourOfferForm","yourOfferFormFields","querySelectorAll","addressField","typeField","priceField","timeinField","timeoutField","roomNumberField","capacityOptions","resetButton","classList","add","forEach","currentField","removeAttribute","value","coordinates","target","getLatLng","toFixed","placeholder","formReset","reset","capacityOption","firstChild","setLatLng","mapFiltersForm","filterSelectFields","filterFeaturesField","housingTypeField","housingPriceField","housingRoomsField","housingGuestsField","housingFeaturesField","wifiField","dishwasherField","parkingField","washerField","elevatorField","conditionerField","currentFilterField","renderSimilarList","similarOffers","clearLayers","allOffers","suitableOffers","currentOffer","offer","type","rooms","Number","guests","price","checked","features","includes","push","createSuitableArray","slice","apartmentOffer","location","bindPopup","newOffer","currentOfferKeys","Object","keys","currentAuthorKeys","author","featuresList","imagesList","imagePattern","popupTitle","popupAddress","popupPrice","popupType","popupCapacity","popupTime","popupDescription","popupAvatar","hideMarkupUnit","unit","isOfferKey","newFeaturesList","length","currentFeaturesList","createDocumentFragment","i","newFeature","createFeaturesList","replaceChild","newImagesList","photos","apartment","currentImagesList","newImage","createImages","title","address","currentApartment","showApartmentType","checkin","checkout","description","avatar","generateOffersMarkup","addLayer","addPin","RERENDER_DELAY","onSuccess","offers","cb","_","debounce","onRoomsNumberFieldChange","onGuestsNumberFieldChange","onPriceRangeFieldChange","onFeaturesFieldChange","formData","FormData","fetch","method","then","response","ok","catch","onOfferFormSubmit","json"],"mappings":"mBAAA,MACMA,EADgBC,SAASC,cAAc,SAASC,QACtBD,cAAc,UCExCE,EAAc,QACdC,EAAc,UAEpB,IAAIC,GAAa,EAEjB,MAAMC,EAAMC,EAAED,IAAI,cACfE,GAAG,QAAQ,KACVH,GAAa,KAEdI,QAAQ,CACPC,IAAKP,EACLQ,IAAKP,GACJ,IAELG,EAAEK,UACA,qDACA,CACEC,YAAa,4FAEfC,MAAMR,GAER,MAAMS,EAAmB,IAChBV,EAGHW,EAAcT,EAAEU,KAAK,CACzBC,QAAS,mBACTC,SAAU,CAAC,GAAI,IACfC,WAAY,CAAC,GAAI,MAGbC,EAAgBd,EAAEe,OACtB,CACEZ,IAAKP,EACLQ,IAAKP,GAEP,CACEmB,WAAW,EACXN,KAAMD,IAIVK,EAAcP,MAAMR,GAMpB,IAAIkB,EAAUjB,EAAEkB,WAAW,IAE3B,MCnDMC,EAAcC,GACE,WAAbA,EAAIC,IAGPC,EAAaC,IACjB,MAAMC,EAAiB/B,SAASgC,cAAc,OAC9CD,EAAeE,MAAMC,OAAS,MAC9BH,EAAeE,MAAME,SAAW,WAChCJ,EAAeE,MAAMG,KAAO,IAC5BL,EAAeE,MAAMI,IAAM,IAC3BN,EAAeE,MAAMK,MAAQ,IAC7BP,EAAeE,MAAMM,QAAU,WAC/BR,EAAeE,MAAMO,SAAW,OAChCT,EAAeE,MAAMQ,UAAY,SACjCV,EAAeE,MAAMS,gBAAkB,MAEvCX,EAAeY,YAAcb,EAE7B9B,SAAS4C,KAAKC,OAAOd,GAErBe,YAAW,KACTf,EAAegB,WAvBK,MCElBC,EAAOhD,SAASC,cAAc,QAE9BgD,EADuBjD,SAASC,cAAc,YAAYC,QAChBD,cAAc,YACxDiD,EAAYlD,SAASC,cAAc,gBAEnCkD,EADkBnD,SAASC,cAAc,UAAUC,QACnBD,cAAc,UAE9CmD,EAAqBH,EAAmBI,WAAU,GAClDC,EAAgBH,EAAcE,WAAU,GAExCE,EAA4B,KAChCC,KAGIC,EAAkC9B,IAClCD,EAAWC,KACbA,EAAI+B,iBACJF,MAYEA,EAAqB,KACzBR,EAAKW,YAAYP,GACjBF,EAAUjB,MAAMC,OAAS,KAEzBlC,SAAS4D,oBAAoB,QAASL,GACtCvD,SAAS4D,oBAAoB,UAAWH,IAGpCI,EAAuB,KAC3BC,KAGIC,EAA6BpC,IAC7BD,EAAWC,KACbA,EAAI+B,iBACJI,MAIEE,EAAoB,KACxBhB,EAAKiB,aAAaX,EAAeN,EAAKkB,WAAW,IACjDhB,EAAUjB,MAAMC,OAAS,KAEzBlC,SAASmE,iBAAiB,QAASN,GACnC7D,SAASmE,iBAAiB,UAAWJ,IAGjCD,EAAqB,KACzBd,EAAKW,YAAYL,GACjBJ,EAAUjB,MAAMC,OAAS,KAEzBlC,SAAS4D,oBAAoB,QAASC,GACtC7D,SAAS4D,oBAAoB,UAAWG,IC/DpCK,EAAa,CAAC,MAAO,MAAO,OAAQ,OAIpCC,EAAkBrE,SAASC,cAAc,WAEzCqE,EADkBtE,SAASC,cAAc,4BACTA,cAAc,OAC9CsE,EAAkBvE,SAASC,cAAc,WACzCuE,EAAkBxE,SAASC,cAAc,mBAE/CoE,EAAgBF,iBAAiB,UAAU,KACzC,MAAMM,EAAOJ,EAAgBK,MAAM,GAC7BC,EAAWF,EAAKG,KAAKC,cAM3B,GAJgBT,EAAWU,MAAMC,GACxBJ,EAASK,SAASD,KAGd,CACX,MAAME,EAAS,IAAIC,WAEnBD,EAAOd,iBAAiB,QAAQ,KAC9BG,EAAca,IAAMF,EAAOG,UAG7BH,EAAOI,cAAcZ,OAIzBF,EAAgBJ,iBAAiB,UAAU,KACzC,MAAMM,EAAOF,EAAgBG,MAAM,GAC7BC,EAAWF,EAAKG,KAAKC,cAM3B,GAJgBT,EAAWU,MAAMC,GACxBJ,EAASK,SAASD,KAGd,CACX,MAAME,EAAS,IAAIC,WAEbI,EAAwBtF,SAASgC,cAAc,OACrDsD,EAAsBC,aAAa,QAxCN,MAyC7BD,EAAsBC,aAAa,SAxCP,MA0C5BN,EAAOd,iBAAiB,QAAQ,KAC9BmB,EAAsBH,IAAMF,EAAOG,UAGrCH,EAAOI,cAAcZ,GACrBD,EAAgBgB,YAAYF,OC7ChC,MAEMG,EAAqB,OACrBC,EAAsB,OACtBC,EAAuB,QAEvBC,EAAgB5F,SAASC,cAAc,YACvC4F,EAAsBD,EAAcE,iBAAiB,YACrDC,EAAeH,EAAc3F,cAAc,YAC3C+F,EAAYJ,EAAc3F,cAAc,SACxCgG,EAAaL,EAAc3F,cAAc,UACzCiG,EAAcN,EAAc3F,cAAc,WAC1CkG,EAAeP,EAAc3F,cAAc,YAC3CmG,EAAkBR,EAAc3F,cAAc,gBAE9CoG,EADgBT,EAAc3F,cAAc,aACZ6F,iBAAiB,UACjDQ,EAActG,SAASC,cAAc,mBAE3C2F,EAAcW,UAAUC,IAAI,qBAC5BX,EAAoBY,SAASC,IAC3BA,EAAanB,aAAa,WAAY,OAGpCxE,MACF6E,EAAcW,UAAUxD,OAAO,qBAC/B8C,EAAoBY,SAASC,IAC3BA,EAAaC,gBAAgB,gBAIjCZ,EAAaR,aAAa,WAAY,IACtCQ,EAAaa,MAAQ,qBAYrBvF,EAAcb,GAAG,WAVOmB,IACtB,IAAIkF,EAAclF,EAAImF,OAAOC,YAE7BhB,EAAaa,MAAQ,GAAGC,EAAYnG,IAAIsG,QAAQ,OAAOH,EAAYlG,IAAIqG,QAAQ,QASjFhB,EAAU7B,iBAAiB,UAAU,KACX,aAApB6B,EAAUY,OACZX,EAAWV,aAAa,MA9CG,KA+C3BU,EAAWgB,YA/CgB,KAgDA,SAApBjB,EAAUY,OACjBX,EAAWV,aAAa,MAAOE,GAC/BQ,EAAWgB,YAAcxB,GAEC,UAAnBO,EAAUY,OACjBX,EAAWV,aAAa,MAAOG,GAC/BO,EAAWgB,YAAcvB,GAEE,WAApBM,EAAUY,QACjBX,EAAWV,aAAa,MAAOI,GAC/BM,EAAWgB,YAActB,MAI7BO,EAAY/B,iBAAiB,UAAU,KACX,UAAtB+B,EAAYU,MACdT,EAAaS,MAAQ,QACU,UAAtBV,EAAYU,MACrBT,EAAaS,MAAQ,QACU,UAAtBV,EAAYU,QACrBT,EAAaS,MAAQ,YAIzBT,EAAahC,iBAAiB,UAAU,KACX,UAAvBgC,EAAaS,MACfV,EAAYU,MAAQ,QACY,UAAvBT,EAAaS,MACtBV,EAAYU,MAAQ,QACY,UAAvBT,EAAaS,QACtBV,EAAYU,MAAQ,YAIxBR,EAAgBjC,iBAAiB,UAAU,KACX,MAA1BiC,EAAgBQ,OAClBP,EAAgB,GAAGM,gBAAgB,YACnCN,EAAgB,GAAGd,aAAa,WAAY,IAC5Cc,EAAgB,GAAGd,aAAa,WAAY,IAC5Cc,EAAgB,GAAGd,aAAa,WAAY,IAC5Cc,EAAgB,GAAGd,aAAa,WAAY,IAC5Cc,EAAgB,GAAGM,gBAAgB,YACnCN,EAAgB,GAAGM,gBAAgB,YACnCN,EAAgB,GAAGM,gBAAgB,aAEF,MAA1BP,EAAgBQ,OACvBP,EAAgB,GAAGM,gBAAgB,YACnCN,EAAgB,GAAGM,gBAAgB,YACnCN,EAAgB,GAAGd,aAAa,WAAY,IAC5Cc,EAAgB,GAAGd,aAAa,WAAY,IAC5Cc,EAAgB,GAAGd,aAAa,WAAY,IAC5Cc,EAAgB,GAAGM,gBAAgB,YACnCN,EAAgB,GAAGM,gBAAgB,YACnCN,EAAgB,GAAGM,gBAAgB,aAEF,MAA1BP,EAAgBQ,OACvBP,EAAgB,GAAGM,gBAAgB,YACnCN,EAAgB,GAAGM,gBAAgB,YACnCN,EAAgB,GAAGM,gBAAgB,YACnCN,EAAgB,GAAGd,aAAa,WAAY,IAC5Cc,EAAgB,GAAGd,aAAa,WAAY,IAC5Cc,EAAgB,GAAGM,gBAAgB,YACnCN,EAAgB,GAAGM,gBAAgB,YACnCN,EAAgB,GAAGM,gBAAgB,aAEF,QAA1BP,EAAgBQ,QACvBP,EAAgB,GAAGM,gBAAgB,YACnCN,EAAgB,GAAGd,aAAa,WAAY,IAC5Cc,EAAgB,GAAGd,aAAa,WAAY,IAC5Cc,EAAgB,GAAGd,aAAa,WAAY,IAC5Cc,EAAgB,GAAGd,aAAa,WAAY,IAC5Cc,EAAgB,GAAGM,gBAAgB,YACnCN,EAAgB,GAAGM,gBAAgB,YACnCN,EAAgB,GAAGM,gBAAgB,gBAIvC,MAAMO,EAAY,KAShB,IARAtB,EAAcuB,QACdlB,EAAWV,aAAa,MAAOE,GAC/BQ,EAAWV,aAAa,cAAeE,GACvCY,EAAgBI,SAASW,GAAmBA,EAAeT,gBAAgB,cAC3EN,EAAgBI,SAASW,GAAmBA,EAAeT,gBAAgB,cAC3EN,EAAgB,GAAGd,aAAa,WAAY,IAC5CjB,EAAca,IArIO,sBAuIdX,EAAgB6C,YACrB7C,EAAgBb,YAAYa,EAAgB6C,YJ5F9ChG,EAAciG,UAAU,CAACnH,EAAaC,IIgGtC2F,EAAaa,MAAQ,sBC9IjBW,EAAiBvH,SAASC,cAAc,iBACxCuH,EAAqBD,EAAezB,iBAAiB,UACrD2B,EAAsBF,EAAetH,cAAc,YACnDyH,EAAmBH,EAAetH,cAAc,iBAChD0H,EAAoBJ,EAAetH,cAAc,kBACjD2H,EAAoBL,EAAetH,cAAc,kBACjD4H,EAAqBN,EAAetH,cAAc,mBAClD6H,EAAuBP,EAAetH,cAAc,qBACpD8H,EAAYD,EAAqB7H,cAAc,gBAC/C+H,GAAkBF,EAAqB7H,cAAc,sBACrDgI,GAAeH,EAAqB7H,cAAc,mBAClDiI,GAAcJ,EAAqB7H,cAAc,kBACjDkI,GAAgBL,EAAqB7H,cAAc,oBACnDmI,GAAmBN,EAAqB7H,cAAc,uBAE5DsH,EAAehB,UAAUC,IAAI,0BAC7BgB,EAAmBf,SAAS4B,IAC1BA,EAAmB9C,aAAa,WAAY,OAE9CkC,EAAoBlC,aAAa,WAAY,IAE7C,MCUM+C,GAAqBC,INqBzB/G,EAAQgH,cM/CkB,CAACC,IAC3B,IAAIC,EAAiB,GAsBrB,OApBAD,EAAUhC,SAASkC,IACZA,EAAaC,MAAMC,OAASnB,EAAiBd,OAAoC,QAA3Bc,EAAiBd,OACxE+B,EAAaC,MAAME,QAAUC,OAAOnB,EAAkBhB,QAAsC,QAA5BgB,EAAkBhB,OAClF+B,EAAaC,MAAMI,SAAWD,OAAOlB,EAAmBjB,QAAuC,QAA7BiB,EAAmBjB,SACpF+B,EAAaC,MAAMK,MAVP,KAU2D,QAA5BtB,EAAkBf,OAC9D+B,EAAaC,MAAMK,MAVR,KAU0D,SAA5BtB,EAAkBf,OAC3D+B,EAAaC,MAAMK,OAZN,KAY+BN,EAAaC,MAAMK,OAXpD,KAWuG,WAA5BtB,EAAkBf,OAC5E,QAA5Be,EAAkBf,SAChBmB,EAAUmB,SAAYlB,GAAgBkB,SAAYjB,GAAaiB,SAAYhB,GAAYgB,SAAYf,GAAce,SAAYd,GAAiBc,aAC/IP,EAAaC,MAAMO,SAASC,SAAS,aAAejB,GAAce,UAAcf,GAAce,WAC9FP,EAAaC,MAAMO,SAASC,SAAS,SAAWrB,EAAUmB,UAAcnB,EAAUmB,WAClFP,EAAaC,MAAMO,SAASC,SAAS,eAAiBpB,GAAgBkB,UAAclB,GAAgBkB,WACpGP,EAAaC,MAAMO,SAASC,SAAS,WAAalB,GAAYgB,UAAchB,GAAYgB,WACxFP,EAAaC,MAAMO,SAASC,SAAS,YAAcnB,GAAaiB,UAAcjB,GAAaiB,WAC3FP,EAAaC,MAAMO,SAASC,SAAS,gBAAkBhB,GAAiBc,UAAcd,GAAiBc,WAE1GR,EAAeW,KAAKV,MAIjBD,GAMgBY,CADJf,EAAcgB,SACwBA,MAAM,EAjCpC,IAkCV9C,SAASmC,INoBb,CAACY,IACd,MAAM9I,EAAM8I,EAAeC,SAAS/I,IAC9BC,EAAM6I,EAAeC,SAAS9I,IAC9BM,EAAOV,EAAEU,KAAK,CAClBC,QAAS,cACTC,SAAU,CAAC,GAAI,IACfC,WAAY,CAAC,GAAI,MAGbE,EAASf,EAAEe,OAAO,CACtBZ,MACAC,OAEF,CACEM,SAIFK,EACGoI,UDzEwB,CAACf,IAC5B,MAAMgB,EAAW5J,EAAUsD,WAAU,GAC/BuG,EAAmBC,OAAOC,KAAKnB,EAAaC,OAC5CmB,EAAoBF,OAAOC,KAAKnB,EAAaqB,QAC7CC,EAAeN,EAAS1J,cAAc,oBACtCiK,EAAaP,EAAS1J,cAAc,kBACpCkK,EAAeR,EAAS1J,cAAc,iBACtCmK,EAAaT,EAAS1J,cAAc,iBACpCoK,EAAeV,EAAS1J,cAAc,yBACtCqK,EAAaX,EAAS1J,cAAc,uBACpCsK,EAAYZ,EAAS1J,cAAc,gBACnCuK,EAAgBb,EAAS1J,cAAc,0BACvCwK,EAAYd,EAAS1J,cAAc,sBACnCyK,EAAmBf,EAAS1J,cAAc,uBAC1C0K,EAAchB,EAAS1J,cAAc,kBAuDrC2K,EAAkBC,IAAUA,EAAKtE,UAAUC,IAAI,oBAC/CsE,EAAa,SAAUlJ,GAAM,OAAOgI,EAAiBR,SAASxH,IAEpE,IAAImJ,EAAkBd,EAAa5G,WAAU,GACxCyH,EAAW,aAAsD,IAAvCnC,EAAaC,MAAMO,SAAS6B,OAGzDD,EAAgBvF,YA/CS,CAACgE,IAC1B,IAAIyB,EAAsBjL,SAASkL,yBAEnC,IAAK,IAAIC,EAAI,EAAGA,EAAI3B,EAAeZ,MAAMO,SAAS6B,OAAQG,IAAK,CAC7D,IAAIC,EAAapL,SAASgC,cAAc,MACxCoJ,EAAW7E,UAAUC,IAAI,kBACrBgD,EAAeZ,MAAMO,SAASgC,GAAG/B,SAAS,SAC5CgC,EAAW7E,UAAUC,IAAI,wBAEvBgD,EAAeZ,MAAMO,SAASgC,GAAG/B,SAAS,cAC5CgC,EAAW7E,UAAUC,IAAI,8BAElBgD,EAAeZ,MAAMO,SAASgC,GAAG/B,SAAS,WACjDgC,EAAW7E,UAAUC,IAAI,0BAEvBgD,EAAeZ,MAAMO,SAASgC,GAAG/B,SAAS,aAC5CgC,EAAW7E,UAAUC,IAAI,4BAEvBgD,EAAeZ,MAAMO,SAASgC,GAAG/B,SAAS,YAC5CgC,EAAW7E,UAAUC,IAAI,2BAEvBgD,EAAeZ,MAAMO,SAASgC,GAAG/B,SAAS,gBAC5CgC,EAAW7E,UAAUC,IAAI,+BAE3ByE,EAAoBzF,YAAY4F,GAElC,OAAOH,GAqBqBI,CAAmB1C,IAF/CiC,EAAeG,GAIjBpB,EAAS2B,aAAaP,EAAiBd,GAEvC,IAAIsB,EAAgBrB,EAAW7G,WAAU,GAoCzC,OAnCKyH,EAAW,WAAkD,IAArCnC,EAAaC,MAAM4C,OAAOR,OAE/CO,EAAc/F,YAzBD,CAACiG,IACpB,IAAIC,EAAoB1L,SAASkL,yBAEjC,IAAK,IAAIC,EAAI,EAAGA,EAAIM,EAAU7C,MAAM4C,OAAOR,OAAQG,IAAK,CACtD,IAAIQ,EAAWxB,EAAa9G,WAAU,GACtCsI,EAASxG,IAAMsG,EAAU7C,MAAM4C,OAAOL,GACtCO,EAAkBlG,YAAYmG,GAEhC,OAAOD,GAiByBE,CAAajD,IAD7CiC,EAAeW,GAEjB5B,EAAS2B,aAAaC,EAAerB,GAEhCY,EAAW,UAAyC,KAA7BnC,EAAaC,MAAMiD,MACvCzB,EAAWzH,YAAcgG,EAAaC,MAAMiD,MADUjB,EAAeR,GAGxEU,EAAW,YAA6C,KAA/BnC,EAAaC,MAAMkD,QAEzCzB,EAAa1H,YAAcgG,EAAaC,MAAMkD,QADpDlB,EAAeP,GAGZS,EAAW,UAAyC,KAA7BnC,EAAaC,MAAMK,MAEvCqB,EAAW3H,YAAc,GAAGgG,EAAaC,MAAMK,eADrD2B,EAAeN,GAGZQ,EAAW,SAAuC,KAA5BnC,EAAaC,MAAMC,KACtC0B,EAAU5H,YAlFQ,CAACoJ,IACzB,OAAQA,EAAiBnD,MAAMC,MAC7B,IAAK,OACH,MAAO,WACT,IAAK,WACH,MAAO,UACT,IAAK,QACH,MAAO,MACT,IAAK,SACH,MAAO,WAyEmBmD,CAAkBrD,GADUiC,EAAeL,GAGtEO,EAAW,UAAyC,KAA7BnC,EAAaC,MAAME,MAEvC0B,EAAc7H,YAAc,GAAGgG,EAAaC,MAAME,qBAAqBH,EAAaC,MAAMI,gBADhG4B,EAAeJ,GAGZM,EAAW,YAAelB,EAAiBR,SAAS,aAA8C,KAA/BT,EAAaC,MAAMqD,SAAkD,KAAhCtD,EAAaC,MAAMsD,SAExHzB,EAAU9H,YAAc,eAAegG,EAAaC,MAAMqD,qBAAqBtD,EAAaC,MAAMsD,WADxGtB,EAAeH,GAGZK,EAAW,gBAAqD,KAAnCnC,EAAaC,MAAMuD,YAE7CzB,EAAiB/H,YAAcgG,EAAaC,MAAMuD,YADxDvB,EAAeF,GAGZX,EAAkBX,SAAS,WAA4C,KAA/BT,EAAaqB,OAAOoC,OAEzDzB,EAAYxF,IAAMwD,EAAaqB,OAAOoC,OAD5CxB,EAAeD,GAGVhB,GC1CH0C,CAAqB7C,IAGzBhI,EAAQ8K,SAAShL,GAAQR,MAAMR,IM1C7BiM,CAAO3D,OCxBL4D,GAAiB,ICXP,IAACC,MDaRC,IFiBwB,IAACC,EEhBhCrE,GAAkBoE,GFgBcC,EEdPC,EAAEC,UAAS,KAClCvE,GAAkBoE,KACjBF,IFaH9E,EAAiBvD,iBAAiB,UAAU,KAC1CwI,OAI6B,CAACA,IAChC/E,EAAkBzD,iBAAiB,UAAU,KAC3CwI,QEjBFG,CAAyBF,EAAEC,UAAS,KAClCvE,GAAkBoE,KACjBF,KFmB6B,CAACG,IACjC9E,EAAmB1D,iBAAiB,UAAU,KAC5CwI,QElBFI,CAA0BH,EAAEC,UAAS,KACnCvE,GAAkBoE,KACjBF,KFoB2B,CAACG,IAC/BhF,EAAkBxD,iBAAiB,UAAU,KAC3CwI,QEnBFK,CAAwBJ,EAAEC,UAAS,KACjCvE,GAAkBoE,KACjBF,KFqByB,CAACG,IAC7B7E,EAAqB3D,iBAAiB,UAAU,KAC9CwI,QEpBFM,CAAsBL,EAAEC,UAAS,KAC/BvE,GAAkBoE,KACjBF,KHkIHlG,EAAYnC,iBAAiB,SAAUxC,IACrCA,EAAI+B,iBG/HJwD,IACAK,EAAeJ,QACfmB,GAAkBoE,MHoGI,CAACC,IACzB/G,EAAczB,iBAAiB,UAAWxC,IACxCA,EAAI+B,iBAEJ,MAAMwJ,EAAW,IAAIC,SAASxL,EAAImF,QAElCsG,MACE,mDACA,CACEC,OAAQ,OACRzK,KAAMsK,IAERI,MAAMC,IAAkBA,EAASC,IACjCtG,IACAyF,IFzIJ3J,EAAKiB,aAAab,EAAoBJ,EAAKkB,WAAW,IACtDhB,EAAUjB,MAAMC,OAAS,KAEzBlC,SAASmE,iBAAiB,QAASZ,GACnCvD,SAASmE,iBAAiB,UAAWV,IEwIjCO,OAEAyJ,OAAM,IAAMzJ,UGpHhB0J,EAAkB,KAChBnG,EAAeJ,QACfmB,GAAkBoE,OChDpBU,MAAM,yDACHE,MAAMC,IAAkBA,EAASC,IHmBhCzM,MACFwG,EAAehB,UAAUxD,OAAO,0BAChCyE,EAAmBf,SAAS4B,IAC1BA,EAAmB1B,gBAAgB,eAErCc,EAAoBd,gBAAgB,aGtBlC4G,EAASI,OAAOL,MAAMZ,IACpBD,GAAUC,OAIZ7K,EAAU,oDAGX4L,OAAM,IAAM5L,EAAU,oD","file":"main.bundle.js","sourcesContent":["const offerTemplate = document.querySelector('#card').content;\nconst offerCard = offerTemplate.querySelector('.popup');\n\nconst generateOffersMarkup = (currentOffer) => {\n  const newOffer = offerCard.cloneNode(true);\n  const currentOfferKeys = Object.keys(currentOffer.offer);\n  const currentAuthorKeys = Object.keys(currentOffer.author);\n  const featuresList = newOffer.querySelector('.popup__features');\n  const imagesList = newOffer.querySelector('.popup__photos');\n  const imagePattern = newOffer.querySelector('.popup__photo');\n  const popupTitle = newOffer.querySelector('.popup__title');\n  const popupAddress = newOffer.querySelector('.popup__text--address');\n  const popupPrice = newOffer.querySelector('.popup__text--price');\n  const popupType = newOffer.querySelector('.popup__type');\n  const popupCapacity = newOffer.querySelector('.popup__text--capacity');\n  const popupTime = newOffer.querySelector('.popup__text--time');\n  const popupDescription = newOffer.querySelector('.popup__description');\n  const popupAvatar = newOffer.querySelector('.popup__avatar');\n\n  const showApartmentType = (currentApartment) => {\n    switch (currentApartment.offer.type) {\n      case 'flat':\n        return 'Квартира';\n      case 'bungalow':\n        return 'Бунгало';\n      case 'house':\n        return 'Дом';\n      case 'palace':\n        return 'Дворец';\n    }\n  };\n\n  const createFeaturesList = (apartmentOffer) => {\n    let currentFeaturesList = document.createDocumentFragment();\n\n    for (let i = 0; i < apartmentOffer.offer.features.length; i++) {\n      let newFeature = document.createElement('li');\n      newFeature.classList.add('popup__feature');\n      if (apartmentOffer.offer.features[i].includes('wifi')) {\n        newFeature.classList.add('popup__feature--wifi');\n      }\n      if (apartmentOffer.offer.features[i].includes('dishwasher')) {\n        newFeature.classList.add('popup__feature--dishwasher');\n      }\n      else if (apartmentOffer.offer.features[i].includes('washer')) {\n        newFeature.classList.add('popup__feature--washer');\n      }\n      if (apartmentOffer.offer.features[i].includes('elevator')) {\n        newFeature.classList.add('popup__feature--elevator');\n      }\n      if (apartmentOffer.offer.features[i].includes('parking')) {\n        newFeature.classList.add('popup__feature--parking');\n      }\n      if (apartmentOffer.offer.features[i].includes('conditioner')) {\n        newFeature.classList.add('popup__feature--conditioner');\n      }\n      currentFeaturesList.appendChild(newFeature);\n    }\n    return currentFeaturesList;\n  }\n\n  const createImages = (apartment) => {\n    let currentImagesList = document.createDocumentFragment();\n\n    for (let i = 0; i < apartment.offer.photos.length; i++) {\n      let newImage = imagePattern.cloneNode(true);\n      newImage.src = apartment.offer.photos[i];\n      currentImagesList.appendChild(newImage);\n    }\n    return currentImagesList;\n  }\n\n  const hideMarkupUnit = (unit) => {unit.classList.add('visually-hidden')}\n  const isOfferKey = function (key) {return currentOfferKeys.includes(key)}\n\n  let newFeaturesList = featuresList.cloneNode(false);\n  if (!isOfferKey('features') || currentOffer.offer.features.length === 0) {\n    hideMarkupUnit(newFeaturesList)\n  } else {\n    newFeaturesList.appendChild(createFeaturesList(currentOffer))\n  }\n  newOffer.replaceChild(newFeaturesList, featuresList);\n\n  let newImagesList = imagesList.cloneNode(false);\n  if (!isOfferKey('photos') || currentOffer.offer.photos.length === 0) {\n    hideMarkupUnit(newImagesList)\n  } else {newImagesList.appendChild(createImages(currentOffer))}\n  newOffer.replaceChild(newImagesList, imagesList);\n\n  if (!isOfferKey('title') || currentOffer.offer.title === '') {hideMarkupUnit(popupTitle)\n  } else {popupTitle.textContent = currentOffer.offer.title}\n\n  if (!isOfferKey('address') || currentOffer.offer.address === '') {\n    hideMarkupUnit(popupAddress)\n  } else {popupAddress.textContent = currentOffer.offer.address}\n\n  if (!isOfferKey('price') || currentOffer.offer.price === '') {\n    hideMarkupUnit(popupPrice)\n  } else {popupPrice.textContent = `${currentOffer.offer.price} ₽/ночь`}\n\n  if (!isOfferKey('type') || currentOffer.offer.type === '') {hideMarkupUnit(popupType)\n  } else {popupType.textContent = showApartmentType(currentOffer)}\n\n  if (!isOfferKey('rooms') || currentOffer.offer.rooms === '') {\n    hideMarkupUnit(popupCapacity)\n  } else {popupCapacity.textContent = `${currentOffer.offer.rooms} комнаты для ${currentOffer.offer.guests} гостей`}\n\n  if (!isOfferKey('checkin') || !currentOfferKeys.includes('checkout') || currentOffer.offer.checkin === '' || currentOffer.offer.checkout === '') {\n    hideMarkupUnit(popupTime)\n  } else {popupTime.textContent = `Заезд после ${currentOffer.offer.checkin}, выезд до ${currentOffer.offer.checkout}`}\n\n  if (!isOfferKey('description') || currentOffer.offer.description === '') {\n    hideMarkupUnit(popupDescription)\n  } else {popupDescription.textContent = currentOffer.offer.description}\n\n  if (!currentAuthorKeys.includes('avatar') || currentOffer.author.avatar === '') {\n    hideMarkupUnit(popupAvatar)\n  } else {popupAvatar.src = currentOffer.author.avatar}\n\n  return newOffer;\n}\n\nexport {generateOffersMarkup};\n","/* global L:readonly */\nimport {generateOffersMarkup} from './generate-offers-markup.js';\n\nconst DEFAULT_LAT = 35.6895;\nconst DEFAULT_LNG = 139.69171;\n\nlet loadStatus = false;\n\nconst map = L.map('map-canvas')\n  .on('load', () => {\n    loadStatus = true;\n  })\n  .setView({\n    lat: DEFAULT_LAT,\n    lng: DEFAULT_LNG,\n  }, 10);\n\nL.tileLayer(\n  'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n  {\n    attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n  },\n).addTo(map);\n\nconst getMapLoadStatus = () => {\n  return loadStatus;\n}\n\nconst mainPinIcon = L.icon({\n  iconUrl: 'img/main-pin.svg',\n  iconSize: [52, 52],\n  iconAnchor: [26, 52],\n});\n\nconst mainPinMarker = L.marker(\n  {\n    lat: DEFAULT_LAT,\n    lng: DEFAULT_LNG,\n  },\n  {\n    draggable: true,\n    icon: mainPinIcon,\n  },\n);\n\nmainPinMarker.addTo(map);\n\nconst resetMainMarker = () => {\n  mainPinMarker.setLatLng([DEFAULT_LAT, DEFAULT_LNG]);\n}\n\nlet markers = L.layerGroup([]);\n\nconst removeMarkers = () => {\n  markers.clearLayers();\n}\n\nconst addPin = (apartmentOffer) => {\n  const lat = apartmentOffer.location.lat;\n  const lng = apartmentOffer.location.lng;\n  const icon = L.icon({\n    iconUrl: 'img/pin.svg',\n    iconSize: [40, 40],\n    iconAnchor: [20, 40],\n  });\n\n  const marker = L.marker({\n    lat,\n    lng,\n  },\n  {\n    icon,\n  },\n  );\n\n  marker\n    .bindPopup(\n      generateOffersMarkup(apartmentOffer),\n    );\n\n  markers.addLayer(marker).addTo(map);\n}\n\nexport {map, addPin, getMapLoadStatus, mainPinMarker, DEFAULT_LAT, DEFAULT_LNG, resetMainMarker, removeMarkers};\n","const ALERT_SHOW_TIME = 5000;\n\nconst isEscEvent = (evt) => {\n  return evt.key === ('Escape' || 'Esc');\n};\n\nconst showAlert = (message) => {\n  const alertContainer = document.createElement('div');\n  alertContainer.style.zIndex = '100';\n  alertContainer.style.position = 'absolute';\n  alertContainer.style.left = '0';\n  alertContainer.style.top = '0';\n  alertContainer.style.right = '0';\n  alertContainer.style.padding = '10px 3px';\n  alertContainer.style.fontSize = '30px';\n  alertContainer.style.textAlign = 'center';\n  alertContainer.style.backgroundColor = 'red';\n\n  alertContainer.textContent = message;\n\n  document.body.append(alertContainer);\n\n  setTimeout(() => {\n    alertContainer.remove();\n  }, ALERT_SHOW_TIME);\n}\n\nexport {isEscEvent, showAlert};\n","import {isEscEvent} from './util.js';\n\nconst main = document.querySelector('main');\nconst successfulAdTemplate = document.querySelector('#success').content;\nconst successfulAdMarkup = successfulAdTemplate.querySelector('.success');\nconst mapCanvas = document.querySelector('.map__canvas');\nconst errorAdTemplate = document.querySelector('#error').content;\nconst errorAdMarkup = errorAdTemplate.querySelector('.error');\n\nconst successfulAdWindow = successfulAdMarkup.cloneNode(true);\nconst errorAdWindow = errorAdMarkup.cloneNode(true);\n\nconst onSuccessfulAdWindowClick = () => {\n  closeSuccessWindow();\n}\n\nconst onSuccessfulAdWindowEscKeydown = (evt) => {\n  if (isEscEvent(evt)) {\n    evt.preventDefault();\n    closeSuccessWindow();\n  }\n}\n\nconst showSuccessWindow = () => {\n  main.insertBefore(successfulAdWindow, main.childNodes[0]);\n  mapCanvas.style.zIndex = '-1';\n\n  document.addEventListener('click', onSuccessfulAdWindowClick);\n  document.addEventListener('keydown', onSuccessfulAdWindowEscKeydown)\n}\n\nconst closeSuccessWindow = () => {\n  main.removeChild(successfulAdWindow);\n  mapCanvas.style.zIndex = '10';\n\n  document.removeEventListener('click', onSuccessfulAdWindowClick);\n  document.removeEventListener('keydown', onSuccessfulAdWindowEscKeydown);\n}\n\nconst onErrorAdWindowClick = () => {\n  closeErrorAdWindow();\n}\n\nconst onErrorAdWindowEscKeydown = (evt) => {\n  if (isEscEvent(evt)) {\n    evt.preventDefault();\n    closeErrorAdWindow();\n  }\n}\n\nconst showAdErrorWindow = () => {\n  main.insertBefore(errorAdWindow, main.childNodes[0]);\n  mapCanvas.style.zIndex = '-1';\n\n  document.addEventListener('click', onErrorAdWindowClick);\n  document.addEventListener('keydown', onErrorAdWindowEscKeydown);\n}\n\nconst closeErrorAdWindow = () => {\n  main.removeChild(errorAdWindow);\n  mapCanvas.style.zIndex = '10';\n\n  document.removeEventListener('click', onErrorAdWindowClick);\n  document.removeEventListener('keydown', onErrorAdWindowEscKeydown);\n}\n\nexport {showSuccessWindow, showAdErrorWindow};\n","const FILE_TYPES = ['gif', 'jpg', 'jpeg', 'png'];\nconst APARTMENT_PREVIEW_HEIGHT = '70';\nconst APARTMENT_PREVIEW_WIDTH = '70';\n\nconst loadAvatarField = document.querySelector('#avatar');\nconst avatarContainer = document.querySelector('.ad-form-header__preview');\nconst avatarPreview = avatarContainer.querySelector('img');\nconst loadImagesField = document.querySelector('#images');\nconst photosContainer = document.querySelector('.ad-form__photo');\n\nloadAvatarField.addEventListener('change', () => {\n  const file = loadAvatarField.files[0];\n  const fileName = file.name.toLowerCase();\n\n  const matches = FILE_TYPES.some((it) => {\n    return fileName.endsWith(it);\n  });\n\n  if (matches) {\n    const reader = new FileReader();\n\n    reader.addEventListener('load', () => {\n      avatarPreview.src = reader.result;\n    });\n\n    reader.readAsDataURL(file);\n  }\n});\n\nloadImagesField.addEventListener('change', () => {\n  const file = loadImagesField.files[0];\n  const fileName = file.name.toLowerCase();\n\n  const matches = FILE_TYPES.some((it) => {\n    return fileName.endsWith(it);\n  });\n\n  if (matches) {\n    const reader = new FileReader();\n\n    const apartmentImagePreview = document.createElement('img');\n    apartmentImagePreview.setAttribute('width', APARTMENT_PREVIEW_HEIGHT);\n    apartmentImagePreview.setAttribute('height', APARTMENT_PREVIEW_WIDTH);\n\n    reader.addEventListener('load', () => {\n      apartmentImagePreview.src = reader.result;\n    });\n\n    reader.readAsDataURL(file);\n    photosContainer.appendChild(apartmentImagePreview);\n  }\n});\n\nexport {avatarPreview, photosContainer};\n","import {getMapLoadStatus, mainPinMarker, resetMainMarker, DEFAULT_LAT, DEFAULT_LNG} from './map.js';\nimport {showSuccessWindow, showAdErrorWindow} from './modal-windows.js';\nimport {avatarPreview, photosContainer} from './photo.js';\n\nconst DEFAULT_AVATAR = 'img/muffin-grey.svg';\nconst BUNGALOW_MINIMUM_PRICE = '0';\nconst FLAT_MINIMUM_PRICE = '1000';\nconst HOUSE_MINIMUM_PRICE = '5000';\nconst PALACE_MINIMUM_PRICE = '10000';\n\nconst yourOfferForm = document.querySelector('.ad-form');\nconst yourOfferFormFields = yourOfferForm.querySelectorAll('fieldset');\nconst addressField = yourOfferForm.querySelector('#address');\nconst typeField = yourOfferForm.querySelector('#type');\nconst priceField = yourOfferForm.querySelector('#price');\nconst timeinField = yourOfferForm.querySelector('#timein');\nconst timeoutField = yourOfferForm.querySelector('#timeout');\nconst roomNumberField = yourOfferForm.querySelector('#room_number');\nconst capacityField = yourOfferForm.querySelector('#capacity');\nconst capacityOptions = capacityField.querySelectorAll('option');\nconst resetButton = document.querySelector('.ad-form__reset');\n\nyourOfferForm.classList.add('ad-form--disabled');\nyourOfferFormFields.forEach((currentField) => {\n  currentField.setAttribute('disabled', '');\n})\n\nif (getMapLoadStatus()) {\n  yourOfferForm.classList.remove('ad-form--disabled');\n  yourOfferFormFields.forEach((currentField) => {\n    currentField.removeAttribute('disabled');\n  });\n}\n\naddressField.setAttribute('readonly', '');\naddressField.value = `${DEFAULT_LAT}, ${DEFAULT_LNG}`;\n\nlet placeCoordinates = (evt) => {\n  let coordinates = evt.target.getLatLng();\n\n  addressField.value = `${coordinates.lat.toFixed(5)}, ${coordinates.lng.toFixed(5)}`;\n}\n\nlet transferCoordinates = () => {\n  return placeCoordinates;\n}\n\nmainPinMarker.on('moveend', transferCoordinates());\n\ntypeField.addEventListener('change', () => {\n  if (typeField.value === 'bungalow') {\n    priceField.setAttribute('min', BUNGALOW_MINIMUM_PRICE);\n    priceField.placeholder = BUNGALOW_MINIMUM_PRICE;}\n  else if (typeField.value === 'flat') {\n    priceField.setAttribute('min', FLAT_MINIMUM_PRICE);\n    priceField.placeholder = FLAT_MINIMUM_PRICE;\n  }\n  else if (typeField.value ==='house') {\n    priceField.setAttribute('min', HOUSE_MINIMUM_PRICE);\n    priceField.placeholder = HOUSE_MINIMUM_PRICE;\n  }\n  else if (typeField.value === 'palace') {\n    priceField.setAttribute('min', PALACE_MINIMUM_PRICE);\n    priceField.placeholder = PALACE_MINIMUM_PRICE;\n  }\n})\n\ntimeinField.addEventListener('change', () => {\n  if (timeinField.value === '12:00') {\n    timeoutField.value = '12:00';\n  } else if (timeinField.value === '13:00') {\n    timeoutField.value = '13:00';\n  } else if (timeinField.value === '14:00') {\n    timeoutField.value = '14:00';\n  }\n})\n\ntimeoutField.addEventListener('change', () => {\n  if (timeoutField.value === '12:00') {\n    timeinField.value = '12:00';\n  } else if (timeoutField.value === '13:00') {\n    timeinField.value = '13:00';\n  } else if (timeoutField.value === '14:00') {\n    timeinField.value = '14:00';\n  }\n})\n\nroomNumberField.addEventListener('change', () => {\n  if (roomNumberField.value === '1') {\n    capacityOptions[2].removeAttribute('disabled');\n    capacityOptions[0].setAttribute('disabled', '');\n    capacityOptions[1].setAttribute('disabled', '');\n    capacityOptions[3].setAttribute('disabled', '');\n    capacityOptions[2].setAttribute('selected', '');\n    capacityOptions[0].removeAttribute('selected');\n    capacityOptions[1].removeAttribute('selected');\n    capacityOptions[3].removeAttribute('selected');\n  }\n  else if (roomNumberField.value === '2') {\n    capacityOptions[1].removeAttribute('disabled');\n    capacityOptions[2].removeAttribute('disabled');\n    capacityOptions[1].setAttribute('selected', '');\n    capacityOptions[0].setAttribute('disabled', '');\n    capacityOptions[3].setAttribute('disabled', '');\n    capacityOptions[0].removeAttribute('selected');\n    capacityOptions[2].removeAttribute('selected');\n    capacityOptions[3].removeAttribute('selected');\n  }\n  else if (roomNumberField.value === '3') {\n    capacityOptions[0].removeAttribute('disabled');\n    capacityOptions[1].removeAttribute('disabled');\n    capacityOptions[2].removeAttribute('disabled');\n    capacityOptions[0].setAttribute('selected', '');\n    capacityOptions[3].setAttribute('disabled', '');\n    capacityOptions[1].removeAttribute('selected');\n    capacityOptions[2].removeAttribute('selected');\n    capacityOptions[3].removeAttribute('selected');\n  }\n  else if (roomNumberField.value === '100') {\n    capacityOptions[3].removeAttribute('disabled');\n    capacityOptions[3].setAttribute('selected', '');\n    capacityOptions[0].setAttribute('disabled', '');\n    capacityOptions[1].setAttribute('disabled', '');\n    capacityOptions[2].setAttribute('disabled', '');\n    capacityOptions[0].removeAttribute('selected');\n    capacityOptions[1].removeAttribute('selected');\n    capacityOptions[2].removeAttribute('selected');\n  }\n})\n\nconst formReset = () => {\n  yourOfferForm.reset();\n  priceField.setAttribute('min', FLAT_MINIMUM_PRICE);\n  priceField.setAttribute('placeholder', FLAT_MINIMUM_PRICE);\n  capacityOptions.forEach((capacityOption) => capacityOption.removeAttribute('disabled'));\n  capacityOptions.forEach((capacityOption) => capacityOption.removeAttribute('selected'));\n  capacityOptions[2].setAttribute('selected', '');\n  avatarPreview.src = DEFAULT_AVATAR;\n\n  while (photosContainer.firstChild) {\n    photosContainer.removeChild(photosContainer.firstChild);\n  }\n\n  resetMainMarker();\n  addressField.value = `${DEFAULT_LAT}, ${DEFAULT_LNG}`;\n};\n\nconst onOfferFormSubmit = (cb) => {\n  yourOfferForm.addEventListener('submit', (evt) => {\n    evt.preventDefault();\n\n    const formData = new FormData(evt.target);\n\n    fetch(\n      'https://22.javascript.pages.academy/keksobooking',\n      {\n        method: 'POST',\n        body: formData,\n      },\n    ).then((response) => {if (response.ok) {\n      formReset();\n      cb();\n      showSuccessWindow();\n    } else {\n      showAdErrorWindow();\n    }},\n    ).catch(() => showAdErrorWindow())\n  })\n};\n\nconst onResetButtonClick = (cb) => {\n  resetButton.addEventListener('click', (evt) => {\n    evt.preventDefault();\n    cb();\n  });\n}\n\nexport {onResetButtonClick, formReset, onOfferFormSubmit};\n","import {getMapLoadStatus} from './map.js';\n\nconst mapFiltersForm = document.querySelector('.map__filters');\nconst filterSelectFields = mapFiltersForm.querySelectorAll('select');\nconst filterFeaturesField = mapFiltersForm.querySelector('fieldset');\nconst housingTypeField = mapFiltersForm.querySelector('#housing-type');\nconst housingPriceField = mapFiltersForm.querySelector('#housing-price');\nconst housingRoomsField = mapFiltersForm.querySelector('#housing-rooms');\nconst housingGuestsField = mapFiltersForm.querySelector('#housing-guests');\nconst housingFeaturesField = mapFiltersForm.querySelector('#housing-features');\nconst wifiField = housingFeaturesField.querySelector('#filter-wifi');\nconst dishwasherField = housingFeaturesField.querySelector('#filter-dishwasher');\nconst parkingField = housingFeaturesField.querySelector('#filter-parking');\nconst washerField = housingFeaturesField.querySelector('#filter-washer');\nconst elevatorField = housingFeaturesField.querySelector('#filter-elevator');\nconst conditionerField = housingFeaturesField.querySelector('#filter-conditioner');\n\nmapFiltersForm.classList.add('map__filters--disabled');\nfilterSelectFields.forEach((currentFilterField) => {\n  currentFilterField.setAttribute('disabled', '');\n});\nfilterFeaturesField.setAttribute('disabled', '');\n\nconst startFilter = () => {\n  if (getMapLoadStatus()) {\n    mapFiltersForm.classList.remove('map__filters--disabled');\n    filterSelectFields.forEach((currentFilterField) => {\n      currentFilterField.removeAttribute('disabled');\n    });\n    filterFeaturesField.removeAttribute('disabled');\n  }\n}\n\nconst onHousingTypeFieldChange = (cb) => {\n  housingTypeField.addEventListener('change', () => {\n    cb();\n  })\n}\n\nconst onRoomsNumberFieldChange = (cb) => {\n  housingRoomsField.addEventListener('change', () => {\n    cb();\n  })\n}\n\nconst onGuestsNumberFieldChange = (cb) => {\n  housingGuestsField.addEventListener('change', () => {\n    cb();\n  })\n}\n\nconst onPriceRangeFieldChange = (cb) => {\n  housingPriceField.addEventListener('change', () => {\n    cb();\n  })\n}\n\nconst onFeaturesFieldChange = (cb) => {\n  housingFeaturesField.addEventListener('change', () => {\n    cb();\n  })\n}\n\nexport {startFilter, mapFiltersForm, onHousingTypeFieldChange, onRoomsNumberFieldChange, onGuestsNumberFieldChange, onPriceRangeFieldChange, onFeaturesFieldChange, housingTypeField, housingPriceField, housingRoomsField, housingGuestsField, housingFeaturesField, wifiField, dishwasherField, parkingField, washerField, elevatorField, conditionerField};\n","import {addPin, removeMarkers} from './map.js';\nimport {housingTypeField, housingPriceField, housingRoomsField, housingGuestsField, wifiField, dishwasherField, parkingField, washerField, elevatorField, conditionerField} from './filter.js';\n\nconst SIMILAR_OFFERS_COUNT = 10;\nconst MEDIUM_PRICE = 10000;\nconst HIGH_PRICE = 50000;\n\nconst createSuitableArray = (allOffers) => {\n  let suitableOffers = [];\n\n  allOffers.forEach((currentOffer) => {\n    if ((currentOffer.offer.type === housingTypeField.value || housingTypeField.value === 'any')\n    && (currentOffer.offer.rooms === Number(housingRoomsField.value) || housingRoomsField.value === 'any')\n    && (currentOffer.offer.guests === Number(housingGuestsField.value) || housingGuestsField.value === 'any')\n    && ((currentOffer.offer.price < MEDIUM_PRICE && housingPriceField.value === 'low')\n    || (currentOffer.offer.price > HIGH_PRICE && housingPriceField.value === 'high')\n    || (currentOffer.offer.price >= MEDIUM_PRICE && currentOffer.offer.price <= HIGH_PRICE && housingPriceField.value === 'middle')\n    || (housingPriceField.value === 'any'))\n    && ((!wifiField.checked && !dishwasherField.checked && !parkingField.checked && !washerField.checked && !elevatorField.checked && !conditionerField.checked)\n    || ((currentOffer.offer.features.includes('elevator') && elevatorField.checked) || (!elevatorField.checked))\n    && ((currentOffer.offer.features.includes('wifi') && wifiField.checked) || (!wifiField.checked))\n    && ((currentOffer.offer.features.includes('dishwasher') && dishwasherField.checked) || (!dishwasherField.checked))\n    && ((currentOffer.offer.features.includes('washer') && washerField.checked) || (!washerField.checked))\n    && ((currentOffer.offer.features.includes('parking') && parkingField.checked) || (!parkingField.checked))\n    && ((currentOffer.offer.features.includes('conditioner') && conditionerField.checked) || (!conditionerField.checked))\n    )) {\n      suitableOffers.push(currentOffer);\n    }\n  })\n\n  return suitableOffers;\n}\n\nconst renderSimilarList = (similarOffers) => {\n  removeMarkers();\n  let copiedOffers = similarOffers.slice();\n  let applicableOffers = createSuitableArray(copiedOffers).slice(0, SIMILAR_OFFERS_COUNT);\n  applicableOffers.forEach((offer) => {\n    addPin(offer);\n  })\n}\n\nexport {renderSimilarList};\n","/* global _:readonly */\n\nimport './generate-offers-markup.js';\nimport './map.js';\nimport './form.js';\nimport './server.js';\nimport './modal-windows.js';\nimport './filter.js';\nimport './photo.js';\nimport {getData} from './server.js';\nimport {renderSimilarList} from './similar-list.js';\nimport {onHousingTypeFieldChange, onRoomsNumberFieldChange, onGuestsNumberFieldChange, onPriceRangeFieldChange, onFeaturesFieldChange, mapFiltersForm} from './filter.js';\nimport {onResetButtonClick, formReset, onOfferFormSubmit} from './form.js';\n\nconst RERENDER_DELAY = 500;\n\ngetData((offers) => {\n  renderSimilarList(offers);\n\n  onHousingTypeFieldChange(_.debounce(() => {\n    renderSimilarList(offers)\n  }, RERENDER_DELAY,\n  ));\n\n  onRoomsNumberFieldChange(_.debounce(() => {\n    renderSimilarList(offers)\n  }, RERENDER_DELAY,\n  ));\n\n  onGuestsNumberFieldChange(_.debounce(() => {\n    renderSimilarList(offers)\n  }, RERENDER_DELAY,\n  ));\n\n  onPriceRangeFieldChange(_.debounce(() => {\n    renderSimilarList(offers)\n  }, RERENDER_DELAY,\n  ));\n\n  onFeaturesFieldChange(_.debounce(() => {\n    renderSimilarList(offers)\n  }, RERENDER_DELAY,\n  ));\n\n  onResetButtonClick(() => {\n    formReset();\n    mapFiltersForm.reset();\n    renderSimilarList(offers);\n  });\n\n  onOfferFormSubmit(() => {\n    mapFiltersForm.reset();\n    renderSimilarList(offers);\n  });\n});\n","import {startFilter} from './filter.js';\nimport {showAlert} from './util.js';\n\nconst getData = (onSuccess) => {\n  fetch('https://22.javascript.pages.academy/keksobooking/data')\n    .then((response) => {if (response.ok) {\n      startFilter();\n      response.json().then((offers) => {\n        onSuccess(offers);\n      })\n    }\n    else {\n      showAlert('Ошибка! Похожие объявления не были загружены.');\n    }\n    })\n    .catch(() => showAlert('Ошибка! Похожие объявления не были загружены.'));\n}\n\nexport {getData};\n"],"sourceRoot":""}